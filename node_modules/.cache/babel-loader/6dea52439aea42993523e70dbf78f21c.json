{"ast":null,"code":"import React, { useState } from \"react\";\nconst symbols = [\"BTC-MOVE-09-04\", \"BTC/USD\"];\n\nconst ws_init = function () {\n  const ws = new WebSocket(\"wss://ftx.com/ws/\");\n\n  ws.onopen = function () {\n    for (var s of symbols) {\n      ws.send(`{\"op\": \"subscribe\", \"channel\": \"trades\", \"market\": \"${s}\"}`);\n    }\n  };\n\n  ws.onclose = function () {\n    setTimeout(ws_init, 5000);\n  };\n\n  ws.onerror = function (error) {\n    console.log('WS error: ' + error);\n  };\n\n  ws.onmessage = function (e) {\n    let data = JSON.parse(e.data);\n\n    if (data.channel == \"trades\" && data.type == \"update\") {\n      getTrades(data);\n    } else if (data.channel == \"orderbook\" && data.type == \"update\") {\n      getOrderBook(data);\n    }\n  };\n\n  const ping = function () {\n    ws.send('{\"op\":\"ping\"}');\n  };\n\n  setInterval(ping, 10000);\n};\n\nvar trades = null;\nvar orderBook = null;\nconst session = null;\n\nconst getTrades = function (data) {\n  trades = data.data[0];\n};\n\nconst getOrderBook = function (data) {\n  orderBook = data.data;\n};\n\nsession = ws_init();\nexport { session, trades, orderBook };","map":{"version":3,"names":["React","useState","symbols","ws_init","ws","WebSocket","onopen","s","send","onclose","setTimeout","onerror","error","console","log","onmessage","e","data","JSON","parse","channel","type","getTrades","getOrderBook","ping","setInterval","trades","orderBook","session"],"sources":["/Users/alejandroballesteros/Documents/GitHub/ftx-autospreader/src/components/session.js"],"sourcesContent":["import React, { useState } from \"react\";\n\nconst symbols = [\"BTC-MOVE-09-04\", \"BTC/USD\"];\n\nconst ws_init = function () {\n    const ws = new WebSocket(\"wss://ftx.com/ws/\");\n\n    ws.onopen = function () {\n        for (var s of symbols) {\n            ws.send(`{\"op\": \"subscribe\", \"channel\": \"trades\", \"market\": \"${s}\"}`);\n        }\n    };\n\n    ws.onclose = function () {\n        setTimeout(ws_init, 5000);\n    };\n\n    ws.onerror = function (error) {\n        console.log('WS error: ' + error);\n    };\n\n    ws.onmessage = function (e) {\n        let data = JSON.parse(e.data);\n        if (data.channel == \"trades\" && data.type == \"update\") {\n            getTrades(data);\n        }else if (data.channel == \"orderbook\" && data.type == \"update\"){\n            getOrderBook(data);\n        }\n    };\n\n    const ping = function () {\n        ws.send('{\"op\":\"ping\"}');\n    };\n    setInterval(ping, 10000);\n}\n\nvar trades = null;\nvar orderBook = null;\nconst session = null;\n\nconst getTrades = function (data) {\n    trades = data.data[0];\n}\n\nconst getOrderBook = function (data) {\n    orderBook = data.data;\n}\nsession = ws_init();\n\nexport {session, trades, orderBook};"],"mappings":"AAAA,OAAOA,KAAP,IAAgBC,QAAhB,QAAgC,OAAhC;AAEA,MAAMC,OAAO,GAAG,CAAC,gBAAD,EAAmB,SAAnB,CAAhB;;AAEA,MAAMC,OAAO,GAAG,YAAY;EACxB,MAAMC,EAAE,GAAG,IAAIC,SAAJ,CAAc,mBAAd,CAAX;;EAEAD,EAAE,CAACE,MAAH,GAAY,YAAY;IACpB,KAAK,IAAIC,CAAT,IAAcL,OAAd,EAAuB;MACnBE,EAAE,CAACI,IAAH,CAAS,uDAAsDD,CAAE,IAAjE;IACH;EACJ,CAJD;;EAMAH,EAAE,CAACK,OAAH,GAAa,YAAY;IACrBC,UAAU,CAACP,OAAD,EAAU,IAAV,CAAV;EACH,CAFD;;EAIAC,EAAE,CAACO,OAAH,GAAa,UAAUC,KAAV,EAAiB;IAC1BC,OAAO,CAACC,GAAR,CAAY,eAAeF,KAA3B;EACH,CAFD;;EAIAR,EAAE,CAACW,SAAH,GAAe,UAAUC,CAAV,EAAa;IACxB,IAAIC,IAAI,GAAGC,IAAI,CAACC,KAAL,CAAWH,CAAC,CAACC,IAAb,CAAX;;IACA,IAAIA,IAAI,CAACG,OAAL,IAAgB,QAAhB,IAA4BH,IAAI,CAACI,IAAL,IAAa,QAA7C,EAAuD;MACnDC,SAAS,CAACL,IAAD,CAAT;IACH,CAFD,MAEM,IAAIA,IAAI,CAACG,OAAL,IAAgB,WAAhB,IAA+BH,IAAI,CAACI,IAAL,IAAa,QAAhD,EAAyD;MAC3DE,YAAY,CAACN,IAAD,CAAZ;IACH;EACJ,CAPD;;EASA,MAAMO,IAAI,GAAG,YAAY;IACrBpB,EAAE,CAACI,IAAH,CAAQ,eAAR;EACH,CAFD;;EAGAiB,WAAW,CAACD,IAAD,EAAO,KAAP,CAAX;AACH,CA9BD;;AAgCA,IAAIE,MAAM,GAAG,IAAb;AACA,IAAIC,SAAS,GAAG,IAAhB;AACA,MAAMC,OAAO,GAAG,IAAhB;;AAEA,MAAMN,SAAS,GAAG,UAAUL,IAAV,EAAgB;EAC9BS,MAAM,GAAGT,IAAI,CAACA,IAAL,CAAU,CAAV,CAAT;AACH,CAFD;;AAIA,MAAMM,YAAY,GAAG,UAAUN,IAAV,EAAgB;EACjCU,SAAS,GAAGV,IAAI,CAACA,IAAjB;AACH,CAFD;;AAGAW,OAAO,GAAGzB,OAAO,EAAjB;AAEA,SAAQyB,OAAR,EAAiBF,MAAjB,EAAyBC,SAAzB"},"metadata":{},"sourceType":"module"}